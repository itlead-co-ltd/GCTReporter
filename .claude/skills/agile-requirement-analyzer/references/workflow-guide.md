# 敏捷需求分析完整工作流指南

> **文档版本**: v1.0  
> **更新日期**: 2026年1月3日  
> **适用场景**: 需要深入了解完整工作流细节时参考本文档

---

## 文档说明

本文档提供敏捷需求分析器（agile-requirement-analyzer）的完整工作流详解，包括：

- 6个步骤的详细执行流程
- 每个步骤的输入输出规范
- 决策点的处理逻辑
- 输出示例和模板
- 常见问题处理方案

**阅读建议**: 首次使用前，建议完整阅读一遍以了解全貌。实际使用时，可按需查阅特定章节。

---

## 工作流概览

### 完整流程图

```
                  📥 原始需求输入
                        ↓
    ┌──────────────────────────────────────────┐
    │  步骤1: 需求澄清                         │
    │  - 读取 01-requirement-clarification.md  │
    │  - 识别模糊点、遗漏点、风险点            │
    │  - 生成P0/P1/P2分级澄清问题清单          │
    └──────────────────────────────────────────┘
                        ↓
    ┌──────────────────────────────────────────┐
    │  步骤2: 需求层次判断                     │
    │  - 基于判断标准识别Epic/Feature/Story    │
    │  - 输出置信度评估                        │
    └──────────────────────────────────────────┘
                        ↓
         ┌──────────────┼──────────────┐
         ↓              ↓              ↓
    [Epic级别]    [Feature级别]   [Story级别]
         ↓              ↓              ↓
    完整流程6步    简化流程3步    快速流程2步
```

### 三种处理路径

| 路径 | 适用需求层次 | 执行步骤 | 预计时间 |
|------|-------------|---------|---------|
| **完整流程** | Epic级别 | 1→2→3→4→5→6→7 | 45-75分钟 |
| **简化流程** | Feature级别 | 1→2→简化4→7 | 15-25分钟 |
| **快速流程** | Story级别 | 1→2→7 | 8-12分钟 |

---

## 步骤1: 需求澄清（详解）

### 执行触发

- **时机**: 接收到原始需求后立即执行
- **输入**: 客户提供的原始需求描述
- **提示词**: references/01-requirement-clarification.md

### 执行过程

#### 1.1 需求理解阶段

**行动**:
1. 仔细阅读原始需求，识别关键词和核心诉求
2. 初步判断需求的完整性和清晰度
3. 识别可能的业务领域和行业背景

**输出**:
- 需求核心目标（一句话概括）
- 涉及的用户角色（初步识别）
- 核心功能点（初步列举）

#### 1.2 需求层次分析

**判断依据**:

```markdown
### Epic级别特征
- 涉及≥3个用户角色
- 跨越多个业务阶段
- 预估需要≥3个月开发
- 需要拆分为多个Feature
- 示例: "开发一个智能客服系统"

### Feature级别特征
- 涉及1-2个用户角色
- 单一业务场景
- 预估需要1-3个月开发
- 需要拆分为多个Story
- 示例: "客户满意度评价功能"

### Story级别特征
- 单一用户角色
- 单一操作或功能点
- 预估需要1-2周开发
- 可直接实现
- 示例: "手机号快速登录"
```

**置信度计算**:
```python
置信度 = (符合特征数 / 总特征数) × 100%

if 置信度 >= 80%:
    判断结果 = "High置信度"
elif 置信度 >= 60%:
    判断结果 = "Medium置信度，建议用户确认"
else:
    判断结果 = "Low置信度，需要更多信息"
```

#### 1.3 六大维度澄清问题生成

**维度1: 功能需求澄清**
- 关注: 功能边界、用户场景、业务规则
- 问题数量: 6-10个
- 示例问题:
  ```markdown
  **问题1.1**: 智能问答的准确率要求？
  - A. 基准级（准确率≥80%）
  - B. 标准级（准确率≥90%）
  - C. 卓越级（准确率≥95%）
  - [X] D. 推荐：标准级（行业主流水平）
  ```

**维度2: 非功能需求澄清**
- 关注: 性能、安全、可用性、扩展性
- 问题数量: 5-8个
- 采用"3阶梯法"量化指标

**维度3: 合规性澄清**
- 关注: 法律法规、行业标准、审批流程
- 问题数量: 3-5个（根据行业调整）
- 必须引用具体法规条款

**维度4: 技术约束澄清**
- 关注: 技术架构、集成接口、部署环境
- 问题数量: 4-6个
- 提供技术选型决策矩阵

**维度5: 项目管理澄清**
- 关注: 时间、预算、团队、验收标准
- 问题数量: 4-6个
- 对比行业基准数据

**维度6: 关键遗漏信息识别**
- 关注: 客户未提及但实际重要的信息
- 识别数量: 至少10个
- 按重要性分级（High/Medium/Low）

#### 1.4 P0/P1/P2问题分级

**分级标准**:

```markdown
🔴 P0 (必须立即澄清)
- 不澄清会导致项目无法启动
- 不澄清会导致重大返工（成本>30%预算）
- 涉及法律红线或强制合规要求
- 数量控制: ≤6个

🟡 P1 (应该尽快澄清)
- 影响数据模型设计
- 影响技术架构选型
- 影响用户核心体验
- 数量控制: 8-12个

🟢 P2 (可以后续澄清)
- 属于优化类需求
- 属于扩展类功能
- 可以在迭代中逐步明确
- 数量不限
```

#### 1.5 风险预警

**风险识别框架**:
```markdown
### 风险矩阵

| 风险类型 | 识别数量 | 重点关注 |
|---------|---------|---------|
| 技术风险 | 1-2个 | 技术可行性、团队能力匹配 |
| 业务风险 | 1-2个 | 业务模式、市场竞争 |
| 合规风险 | 1-2个 | 法律法规、审批流程 |
| 管理风险 | 1个 | 时间、预算、资源 |
```

**每个风险必须包含**:
- 触发条件
- 发生概率（High/Medium/Low）
- 影响程度（High/Medium/Low）
- 缓解措施（预防/应对/恢复）

### 输出规范

**标准输出结构**:
```markdown
# 需求澄清报告

> **生成时间**: 2026-01-03 14:30
> **需求名称**: 智能客服系统
> **分析师**: Claude (agile-requirement-analyzer v1.0)
> **置信度**: High

---

## 📊 执行摘要

本需求为Epic级别（置信度85%），涉及客户、客服人员、运营经理3个核心角色，
跨越咨询接待、问题处理、数据分析3个业务阶段。已识别25个澄清问题，
其中6个P0问题建议立即澄清，10个P1问题建议在概要设计前澄清。

---

## 📋 需求层次分析

**识别结果**: Epic级别
**置信度**: 85%

**判断依据**:
- ✅ 涉及3个用户角色（客户、客服、运营经理）
- ✅ 跨越3个业务阶段（接待、处理、分析）
- ✅ 预估需要≥3个月开发
- ✅ 需要拆分为多个Feature（智能问答、工单管理、数据分析等）

**核心目标**: 通过AI和自动化技术提升客服效率和客户满意度

**已知信息**:
- 功能需求: 多渠道接入、智能问答、工单管理、数据分析
- 非功能需求: 需要实时响应、高可用性
- 约束条件: （待澄清）
- 涉众角色: 客户、客服人员、运营经理

---

## 1. 功能需求澄清

（详细问题列表，按SKILL.md中的格式）

---

## 2. 非功能需求澄清

（详细问题列表）

---

...（其他维度）

---

## ✅ 检查点

**已完成**:
- [X] 需求层次判断（Epic级别，85%置信度）
- [X] 6大维度澄清问题生成（共25个）
- [X] P0/P1/P2问题分级
- [X] 风险预警（识别5个核心风险）

**关键信息传递**:
- 需求层次: Epic级别 → 进入完整流程
- 核心角色: 客户、客服人员、运营经理
- 核心功能模块: 智能问答、工单管理、数据分析

**质量指标**:
- 澄清问题总数: 25个
- 问题分级: P0(6) + P1(10) + P2(9)
- 风险识别: 5个（技术2+业务1+合规1+管理1）

**下一步**:
- 如果用户选择澄清P0问题 → 等待用户回答后进入步骤3
- 如果用户选择基于假设继续 → 标注假设后进入步骤3
- 如果判断为Feature/Story级别 → 进入相应简化流程

**续传码**: CHECKPOINT:agile-req-analyzer:step1:2026-01-03:xyz789abc123
```

### 决策点处理

**决策点1: 是否需要澄清P0问题？**

```markdown
🤔 决策：是否需要澄清P0问题？

已识别6个P0问题，这些问题不澄清可能导致：
- 技术方案选型错误（返工成本>100万）
- 不符合合规要求（项目暂停风险）
- 核心功能缺失（无法满足业务目标）

**建议方式**:
A. 现在澄清所有P0和P1问题（推荐，需要客户配合，预计2小时）
B. 仅澄清P0问题后继续（折中方案，预计30分钟）
C. 基于假设继续（风险较高，标注假设，后续需要确认）

请选择（A/B/C）：
```

**处理逻辑**:
- 选择A → 展示P0+P1问题清单，等待用户回答
- 选择B → 展示P0问题清单，等待用户回答
- 选择C → 进入"基于假设模式"，为P0问题生成合理假设

---

## 步骤3: Epic分析（详解）

### 执行触发

- **前置条件**: 步骤2判断为Epic级别
- **输入**: 步骤1的需求澄清报告
- **提示词**: references/02-epic-analysis.md

### 执行过程

#### 3.1 Epic概述分析

**输出内容**:
```markdown
## Epic概述

| 分析维度 | 内容 |
|---------|------|
| Epic名称 | 智能客服系统 |
| 业务价值 | 通过AI和自动化提升客服效率30%，客户满意度提升20% |
| 核心目标 | 实现7×24小时智能客服，降低人工客服工作量，提高响应速度 |
| 成功标准 | 智能问答准确率≥90%，平均响应时间≤3秒，客服工作量降低30% |
| 复杂度评估 | 高 - 涉及AI算法、多渠道集成、大数据分析 |
```

#### 3.2 用户角色分析

**分析维度**:
1. **角色识别**: 识别所有直接和间接用户
2. **角色分类**: 核心/重要/次要角色
3. **诉求分析**: 每个角色的核心痛点和期望
4. **场景描述**: 典型使用场景
5. **频率估算**: 使用频率（高/中/低）

**输出示例**:
```markdown
## 用户角色分析

| 用户角色 | 角色描述 | 核心诉求 | 主要场景 | 使用频率 |
|---------|---------|---------|---------|---------|
| 客户 | 咨询和投诉的终端用户 | 快速获得准确答案，问题得到有效解决 | 产品咨询、故障报修、投诉建议 | 高 |
| 客服人员 | 一线服务人员 | 减少重复工作，专注复杂问题，提高工作效率 | 处理复杂咨询、工单跟进、质量监控 | 高 |
| 运营经理 | 客服团队管理者 | 掌握服务质量，优化资源配置，数据驱动决策 | 查看实时数据、分析趋势、调整策略 | 中 |
| 系统管理员 | IT运维人员 | 系统稳定运行，快速故障处理，权限管理 | 系统配置、监控告警、用户管理 | 低 |

### 角色优先级排序
1. **核心角色**: 客户、客服人员 - 直接使用者，决定系统成败
2. **重要角色**: 运营经理 - 管理决策者，影响系统价值
3. **次要角色**: 系统管理员 - 支撑角色，确保系统运行
```

#### 3.3 拆解策略制定

**拆解维度选择矩阵**:

| 拆解维度 | 适用场景 | 优势 | 劣势 | 推荐度 |
|---------|---------|------|------|--------|
| **按用户角色** | 多角色复杂场景 | 用户视角清晰 | 可能有功能重复 | ⭐⭐⭐⭐⭐ |
| **按功能模块** | 功能边界清晰 | 开发友好 | 可能忽略用户体验 | ⭐⭐⭐⭐ |
| **按使用场景** | 用户旅程复杂 | 端到端完整 | 可能跨越多个模块 | ⭐⭐⭐ |
| **混合拆解** | 大型复杂Epic | 灵活全面 | 需要更多协调 | ⭐⭐⭐⭐ |

**推荐策略输出**:
```markdown
## 拆解策略

### 推荐拆解维度
**主维度**: 按功能模块拆解
**理由**: 
1. 智能客服系统的功能模块边界清晰（智能问答、工单管理、数据分析）
2. 各模块可以并行开发，减少依赖
3. 便于技术团队按专长分工

### 拆解框架
| 拆解分组 | 包含内容 | 预估故事数 | 优先级 |
|---------|---------|-----------|--------|
| 多渠道接入 | 网页、APP、微信、电话接入 | 4-6个 | Must |
| 智能问答引擎 | NLP处理、知识库匹配、学习优化 | 6-8个 | Must |
| 工单管理 | 工单创建、分配、跟进、关闭 | 5-7个 | Must |
| 人工客服协作 | 转人工、协同工作、知识沉淀 | 4-6个 | Should |
| 数据分析报表 | 实时监控、趋势分析、决策支持 | 3-5个 | Should |
| 系统管理 | 用户管理、权限配置、系统监控 | 2-4个 | Could |

### 总体预估
- 预估用户故事总数: 24-36个（建议控制在30个以内）
- 建议迭代数: 4-5个迭代（每迭代2周）
- 核心功能占比: 60%（Must Have）
```

#### 3.4 依赖与风险分析

**依赖识别**:
```markdown
## 依赖与风险分析

### 关键依赖
| 依赖类型 | 依赖描述 | 影响范围 | 应对建议 |
|---------|---------|---------|---------|
| 技术依赖 | NLP算法能力 | 智能问答准确率 | 采用成熟的NLP服务商，预留算法切换接口 |
| 业务依赖 | 知识库内容质量 | 智能问答效果 | 提前规划知识库建设，分阶段上线 |
| 外部依赖 | 第三方渠道API（微信、支付宝） | 多渠道接入 | 提前申请接口权限，预留2周审批时间 |
```

**风险矩阵**:
```markdown
### 风险识别
| 风险点 | 风险等级 | 可能影响 | 缓解措施 |
|--------|---------|---------|---------|
| AI算法准确率不达标 | 高 | 用户体验差，系统价值降低 | 1. 选择成熟算法 2. 设置合理预期 3. 人工兜底 |
| 知识库建设周期长 | 中 | 上线延期，初期效果差 | 1. 优先核心知识 2. 渐进式上线 3. 用户反馈快速迭代 |
| 多渠道集成复杂 | 中 | 开发周期延长，成本增加 | 1. 优先核心渠道 2. 统一接入层设计 3. 分阶段上线 |
| 用户接受度低 | 低 | 使用率不达预期 | 1. 试点推广 2. 用户培训 3. 持续优化体验 |
```

### 输出规范

（与SKILL.md中的检查点格式一致）

---

## 步骤4: 用户故事生成（详解）

### 执行触发

- **Epic路径**: 基于步骤3的Epic分析结果
- **Feature路径**: 基于步骤1的需求澄清（简化版）
- **提示词**: references/03-user-story-generation.md

### 用户故事编写规范

#### 标准格式

```markdown
作为 [用户角色]，
我希望 [功能描述]，
以便 [业务价值]。
```

**三要素检查**:
1. **角色明确**: 不是"用户"，而是具体的角色（客户/客服/管理员）
2. **功能清晰**: 使用用户语言，避免技术术语
3. **价值明确**: 说明"为什么需要"，不是"怎么做"

#### 常见编写模式

**数据查询类**:
```markdown
作为客户，
我希望能查询我的历史咨询记录，
以便快速找到之前讨论的问题和解决方案。
```

**数据录入类**:
```markdown
作为客服人员，
我希望能快速创建工单并分配给相关部门，
以便及时跟进客户问题。
```

**配置管理类**:
```markdown
作为系统管理员，
我希望能配置智能问答的置信度阈值，
以便平衡自动回复准确率和覆盖率。
```

**通知提醒类**:
```markdown
作为客服人员，
我希望收到工单超时预警通知，
以便及时处理避免客户投诉。
```

**数据分析类**:
```markdown
作为运营经理，
我希望能查看客服响应时间和解决率的趋势图，
以便评估团队绩效和优化资源配置。
```

### 粒度控制

**粒度评估标准**:

| 粒度 | 预估工作量 | 特征 | 示例 |
|------|-----------|------|------|
| **S** (Small) | 1-3天 | 单一功能点，无复杂逻辑，UI简单 | "查看个人资料" |
| **M** (Medium) | 3-5天 | 包含业务逻辑，可能需要调用多个接口 | "创建工单并分配" |
| **L** (Large) | 5-10天 | 涉及多个子功能，有复杂算法或集成 | "智能问答引擎" |

**粒度控制原则**:
1. 首次拆分允许有M/L级故事
2. L级故事≤20%（超过需要进一步拆分）
3. 迭代规划时，L级故事必须拆分为S/M级

### 质量自检清单

在输出用户故事前，自动执行以下检查：

```markdown
## 质量自检

- [ ] 所有故事都遵循"作为...我希望...以便..."格式？
- [ ] 所有故事都有明确的用户价值（"以便"部分不空洞）？
- [ ] 故事数量合理（Epic:15-30，Feature:3-8）？
- [ ] 粒度分布合理（L级故事≤20%）？
- [ ] 每个故事都能独立交付价值？
- [ ] 故事之间依赖关系最小化？

**检查结果**: [全部通过 / 有X项需要改进]
```

---

## 步骤5: INVEST评估（详解）

### 执行触发

- **适用条件**: Epic或Feature级别的用户故事
- **输入**: 步骤4生成的用户故事列表
- **提示词**: references/04-invest-evaluation.md

### INVEST评估标准详解

#### I - Independent (独立性)

**评估标准**:
```markdown
✅ 优秀（90-100分）:
- 可以独立开发、测试、部署
- 与其他故事无强依赖关系
- 顺序可以灵活调整

⚠️ 良好（70-89分）:
- 有弱依赖关系，但不阻碍开发
- 依赖可以通过Mock数据解决
- 顺序有偏好但可调整

❌ 不足（<70分）:
- 有强依赖关系，必须按顺序开发
- 依赖关系影响技术实现
- 无法独立测试验收
```

**常见问题**:
- 故事A依赖故事B的数据模型
- 故事C必须在故事D之后才能开发

**改进建议**:
- 调整故事边界，减少依赖
- 使用数据接口解耦
- 明确依赖关系，在迭代规划时考虑

#### N - Negotiable (可协商)

**评估标准**:
```markdown
✅ 优秀: 需求细节灵活，UI/交互可调整，业务规则可协商
⚠️ 良好: 核心功能固定，但实现方式和细节可协商
❌ 不足: 完全固定，无协商空间（可能是技术实现细节，不是用户故事）
```

#### V - Valuable (有价值)

**评估标准**:
```markdown
✅ 优秀: 
- 明确的用户价值
- 价值可量化（效率提升X%，时间节省X分钟）
- 用户愿意为此买单

⚠️ 良好: 
- 有用户价值，但不明显
- 价值难以量化
- "Nice to have"

❌ 不足: 
- 无明确用户价值
- 纯技术驱动（如"重构数据库"）
- "以便"部分空洞
```

#### E - Estimable (可估算)

**评估标准**:
```markdown
✅ 优秀: 
- 需求清晰，技术方案明确
- 团队有类似经验
- 可以给出准确估算（±20%）

⚠️ 良好: 
- 需求大致清晰，但有不确定性
- 可以给出范围估算（如3-5天）

❌ 不足: 
- 需求模糊，无法估算
- 涉及未知技术，风险高
- 需要更多信息才能估算
```

#### S - Small (小粒度)

**评估标准**:
```markdown
✅ 优秀: 1-3天完成（S级）
⚠️ 良好: 3-5天完成（M级）
❌ 不足: >5天（L级），需要拆分
```

#### T - Testable (可测试)

**评估标准**:
```markdown
✅ 优秀: 
- 验收标准明确、可执行
- 可以编写自动化测试用例
- 成功/失败边界清晰

⚠️ 良好: 
- 验收标准存在，但不够具体
- 需要人工测试
- 边界条件需要补充

❌ 不足: 
- 无验收标准
- 主观判断（如"界面美观"）
- 无法验证
```

### 综合评分计算

```python
综合分 = (I×0.2 + N×0.15 + V×0.25 + E×0.15 + S×0.15 + T×0.10) × 100

分级标准:
≥85分: 通过（优秀故事）
70-84分: 需改进（可接受，但有优化空间）
<70分: 需重写（质量不达标）
```

### 质量门检查

在评估完成后，自动执行质量门检查：

```markdown
🚦 质量门检查

检查项1: Must Have占比是否≤60%？
- 标准: ≤60% → ✅通过
- 当前: 55% (12个Must / 22个总计)
- 结果: ✅通过

检查项2: 有无≥3个<70分故事？
- 标准: <3个 → ✅通过
- 当前: 2个（US007: 68分, US015: 65分）
- 结果: ✅通过

检查项3: 整体平均分是否≥75？
- 标准: ≥75分 → ✅通过
- 当前: 78分
- 结果: ✅通过

**质量门结果**: ✅全部通过（建议进入验收标准生成）
```

---

## 步骤6: 优化决策（详解）

### 决策模式

#### 模式1: 自动决策（推荐）

**决策树**:
```
评估完成
  ↓
判断: 有≥3个<70分故事？
  ├── 是 → 自动决策：全量优化
  │         输出: "发现{n}个需重写故事，自动进入优化"
  │         行动: 返回步骤4，携带改进建议
  │
  └── 否 → 判断: 所有故事≥85分？
            ├── 是 → 自动决策：跳过优化
            │         输出: "故事质量优秀，直接进入验收标准生成"
            │         行动: 进入步骤7
            │
            └── 否 → 人工决策
                      输出: 展示决策界面
                      行动: 等待用户选择
```

#### 模式2: 人工决策

始终展示决策界面，由用户选择。

### 决策界面设计

```markdown
🤔 优化决策

📊 INVEST评估结果：
- 通过（≥85分）: 15个
- 需改进（70-84分）: 5个
- 需重写（<70分）: 2个
- 平均分: 78分

📋 问题故事清单:
- US007（68分）: 独立性不足，依赖US003
- US015（65分）: 可估算性差，需求不够清晰
- US010（72分）: 粒度过大，建议拆分
- US018（76分）: 验收标准模糊
- US022（80分）: 价值表述不够明确

💡 建议: 根据评估结果，建议进行局部优化（优化5个问题故事）

**请选择处理方式**:
A. 全量优化（重新生成所有22个故事，推荐用于有≥3个<70分故事）
   - 优点: 统一优化，整体质量提升
   - 缺点: 耗时较长（约10分钟）
   
B. 局部优化（仅优化上述5个问题故事）
   - 优点: 快速解决问题，保留优秀故事
   - 缺点: 需要明确指定故事ID
   - 操作: 请输入要优化的故事ID（逗号分隔）: [US007,US015,US010,US018,US022]
   
C. 跳过优化（直接进入验收标准生成）
   - 优点: 快速推进，节省时间
   - 缺点: 问题故事可能影响后续开发
   - 建议: 仅在时间紧迫且问题可接受时选择

请输入选项（A/B/C）或直接输入故事ID列表：
```

### 优化执行

#### 全量优化流程

1. **准备改进上下文**:
   ```markdown
   根据INVEST评估报告，以下问题需要在重新生成时注意：
   
   **独立性问题**:
   - US007依赖US003，建议调整故事边界或明确依赖关系
   
   **粒度问题**:
   - US010过大（预估8天），建议拆分为2-3个M级故事
   
   **可估算性问题**:
   - US015需求不清晰，建议补充具体场景和验收标准
   ```

2. **重新执行步骤4**:
   - 读取 references/03-user-story-generation.md
   - 携带改进上下文
   - 生成新的用户故事列表

3. **对比新旧版本**:
   ```markdown
   ## 优化对比
   
   | 故事ID | 旧版评分 | 新版评分 | 改进点 |
   |--------|---------|---------|--------|
   | US007 | 68 | 88 | 调整边界，减少依赖 |
   | US010 | 72 | 拆分为US010a(85), US010b(82) | 拆分为2个M级故事 |
   | US015 | 65 | 86 | 补充场景和验收标准 |
   
   **整体提升**: 平均分 78 → 85 (+7分)
   ```

#### 局部优化流程

1. **识别优化目标**: 解析用户输入的故事ID列表
2. **逐个优化**: 针对每个故事，基于评估报告的改进建议重写
3. **更新故事列表**: 用优化后的故事替换原故事
4. **输出优化报告**: 展示优化前后对比

---

## 步骤7: 生成验收标准（详解）

### 执行触发

- **适用条件**: 所有需求层次（Epic/Feature/Story）
- **输入**: 最终确认的用户故事列表
- **提示词**: references/05-acceptance-criteria.md

### 验收标准编写规范

#### Given-When-Then格式

**标准格式**:
```markdown
**场景**: [场景名称]

**Given** (前置条件)
- 前置条件1
- 前置条件2

**When** (触发动作)
- 用户执行的操作

**Then** (预期结果)
- 预期结果1
- 预期结果2
```

**示例**:
```markdown
### US001: 客户通过手机号登录

**场景1: 首次登录成功**

**Given**
- 客户已安装APP
- 客户手机号未注册
- 网络连接正常

**When**
- 客户输入手机号: 13800138000
- 客户输入验证码: 123456（系统发送的正确验证码）
- 客户点击"登录"按钮

**Then**
- 系统自动创建新账户
- 自动跳转到首页
- 显示欢迎提示: "欢迎使用智能客服系统"
- 客户状态标记为"已登录"

---

**场景2: 验证码错误**

**Given**
- 客户已输入手机号
- 系统已发送验证码

**When**
- 客户输入错误验证码: 000000
- 客户点击"登录"按钮

**Then**
- 系统显示错误提示: "验证码错误，请重新输入"
- 验证码输入框清空
- 验证码输入框获得焦点
- 客户状态保持"未登录"
- 错误次数+1（累计5次锁定账户10分钟）
```

### 验收标准分类

#### 功能验收点

```markdown
## 功能验收点

### 1. 核心功能
- ✅ 客户可以使用手机号+验证码登录
- ✅ 系统在3秒内发送验证码
- ✅ 验证码6位数字，5分钟内有效

### 2. 异常处理
- ✅ 验证码错误时给出明确提示
- ✅ 验证码过期时提示重新获取
- ✅ 连续5次错误锁定账户10分钟

### 3. 边界条件
- ✅ 支持中国大陆手机号（11位，1开头）
- ✅ 1分钟内只能发送1次验证码
- ✅ 同一手机号24小时内最多发送10次验证码
```

#### 非功能验收点

```markdown
## 非功能验收点

### 性能要求
- ✅ 验证码发送响应时间≤3秒（P95）
- ✅ 登录验证响应时间≤1秒（P95）
- ✅ 并发支持1000用户同时登录

### 安全要求
- ✅ 验证码使用加密传输（HTTPS）
- ✅ 验证码使用后立即失效，不可重复使用
- ✅ 登录日志完整记录（IP、时间、结果）

### 可用性要求
- ✅ 验证码发送成功率≥99%
- ✅ 登录成功率≥99.5%
- ✅ 系统响应时间≥99%在SLA内

### 兼容性要求
- ✅ 支持iOS 12+、Android 8+
- ✅ 支持主流手机浏览器（Chrome、Safari、微信内置浏览器）
```

#### 验收流程

```markdown
## 验收流程

### 1. 功能测试（开发完成后）
**执行人**: 测试工程师
**时间**: 2天
**通过标准**: 所有功能验收点通过，无P0/P1 Bug

### 2. 性能测试（功能测试通过后）
**执行人**: 性能测试工程师
**时间**: 1天
**通过标准**: 所有性能指标达标

### 3. 安全测试（性能测试通过后）
**执行人**: 安全工程师
**时间**: 1天
**通过标准**: 无安全漏洞

### 4. 用户验收测试（UAT）
**执行人**: 产品经理 + 业务方代表
**时间**: 1天
**通过标准**: 业务方确认满足需求，签字验收

### 5. 上线发布
**执行人**: 运维工程师
**时间**: 0.5天
**通过标准**: 灰度发布无异常，监控指标正常
```

### 输出规范

（与SKILL.md中的最终检查点格式一致）

---

## 附录

### A. 输出示例库

（提供每个步骤的完整输出示例）

### B. 常见问题解答

（详细的FAQ）

### C. 术语表

| 术语 | 英文 | 解释 |
|------|------|------|
| Epic | Epic | 大型需求，需要拆分为多个Feature |
| Feature | Feature | 功能模块，需要拆分为多个Story |
| Story | User Story | 用户故事，1-2周内可完成的需求单元 |
| INVEST | INVEST | 用户故事质量评估原则 |
| MoSCoW | MoSCoW | 优先级排序方法（Must/Should/Could/Won't） |
| Given-When-Then | GWT | 验收标准编写格式 |
| P0/P1/P2 | Priority | 问题优先级分级 |

### D. 参考资源

- 《用户故事与敏捷方法》- Mike Cohn
- 《敏捷估计与规划》- Mike Cohn
- 《用户故事地图》- Jeff Patton
- Scrum Guide - https://scrumguides.org/
- INVEST原则 - Bill Wake

---

**文档结束**

使用本指南时，建议结合SKILL.md和具体的reference文件，根据实际情况灵活应用。

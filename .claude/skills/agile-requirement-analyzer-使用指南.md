# 敏捷需求分析器 (Agile Requirement Analyzer) - 使用指南

> **Skill版本**: v1.0  
> **创建日期**: 2026年1月3日  
> **适用场景**: 从客户原始需求到验收标准的完整敏捷需求分析

---

## 🎉 Skill 创建成功！

**文件位置**: `c:\Programs\CoursePortal\.claude\skills\agile-requirement-analyzer.skill`

**Skill结构**:
```
agile-requirement-analyzer/
├── SKILL.md (核心工作流，约500行)
└── references/ (详细提示词模板)
    ├── 01-requirement-clarification.md  (需求澄清)
    ├── 02-epic-analysis.md              (Epic分析)
    ├── 03-user-story-generation.md      (用户故事生成)
    ├── 04-invest-evaluation.md          (INVEST评估)
    ├── 05-acceptance-criteria.md        (验收标准)
    └── workflow-guide.md                (完整工作流指南)
```

---

## 📚 核心特性

### 1. 完整的6步工作流

```
原始需求 → 需求澄清 → 层次判断 → 
├─ Epic → 完整流程(6步) → Epic分析 → 用户故事生成 → INVEST评估 → 优化决策 → 验收标准
├─ Feature → 简化流程(3步) → 简化故事生成 → 验收标准
└─ Story → 快速流程(2步) → 验收标准
```

### 2. 智能决策机制

- **自动决策模式**（默认）: 根据评估结果自动决定是否优化
- **人工决策模式**: 用户完全掌控每个决策点

### 3. 学习记忆功能

- 记录用户偏好（拆解维度、故事粒度、优化模式等）
- 后续分析自动应用偏好，减少重复询问
- 支持偏好导出和分享

### 4. 断点续传

- 每个检查点自动生成续传码
- 可在新对话中继续分析
- 适合长时间分析任务

### 5. 质量保障

- 自动质量门检查
- INVEST六维度评估
- 标准化输出格式

---

## 🚀 快速开始

### 方式1: 最简使用

直接在对话中说：

```
请分析以下需求：

【需求描述】
我们需要开发一个智能客服系统，支持多渠道接入（网页、APP、微信）、
智能问答、工单管理、数据分析等功能。

主要用户包括：
- 客户：咨询和投诉
- 客服人员：处理问题和跟进
- 运营经理：查看数据和优化策略

技术要求：
- 实时响应（3秒内）
- 7×24小时可用
- 支持并发1000用户
```

Skill会自动：
1. 识别这是Epic级需求
2. 执行需求澄清
3. 进行Epic分析
4. 生成用户故事
5. INVEST评估
6. 询问是否优化
7. 生成验收标准

---

### 方式2: 使用快速命令

```
分析需求：[粘贴需求]
```

或者

```
使用敏捷需求分析器分析以下需求...
```

---

## 📖 详细使用场景

### 场景1: Epic级需求分析（完整流程）

**适用情况**: 大型需求，涉及多个角色和业务阶段

**示例**:
```
请分析：开发一个电商平台，包含商品管理、订单处理、支付系统、
用户评价、数据分析等功能。
```

**执行流程**: 
1. 需求澄清（10-15分钟）
2. 识别为Epic级别
3. Epic分析（5-8分钟）
4. 生成15-30个用户故事（10-15分钟）
5. INVEST评估（8-12分钟）
6. 优化决策（0-10分钟）
7. 生成验收标准（10-15分钟）

**总耗时**: 45-75分钟

---

### 场景2: Feature级需求分析（简化流程）

**适用情况**: 功能模块需求，单一业务场景

**示例**:
```
请分析：在现有系统中增加"用户积分功能"，包括积分获取、
积分消费、积分兑换、积分查询等功能。
```

**执行流程**:
1. 需求澄清（5-8分钟）
2. 识别为Feature级别
3. 生成3-8个用户故事（5-8分钟）
4. 生成验收标准（5-8分钟）

**总耗时**: 15-25分钟

---

### 场景3: Story级需求分析（快速流程）

**适用情况**: 单一用户故事

**示例**:
```
请分析：作为客户，我希望能通过手机号快速登录系统，
以便快速访问我的订单信息。
```

**执行流程**:
1. 需求澄清（3-5分钟）
2. 识别为Story级别
3. 生成验收标准（5-7分钟）

**总耗时**: 8-12分钟

---

## 🎯 高级功能

### 1. 偏好管理

**查看偏好**:
```
查看偏好设置
```

**更新偏好**:
```
更新偏好: 拆解维度=按角色
更新偏好: 优化决策模式=人工
```

**重置偏好**:
```
重置偏好
```

**导出偏好**（可分享给团队）:
```
导出偏好
```

---

### 2. 断点续传

**获取续传码**:
每个检查点会自动输出续传码，例如：
```
📌 续传码
CHECKPOINT:agile-req-analyzer:step4:2026-01-03:abc123def456
```

**继续分析**:
在新对话中说：
```
继续分析，续传码：CHECKPOINT:agile-req-analyzer:step4:2026-01-03:abc123def456
```

---

### 3. 局部优化

**优化指定故事**:
```
优化用户故事：US001,US003,US007
```

或在优化决策点选择"B选项"并输入故事ID列表。

---

## 💡 使用技巧

### 技巧1: 提供完整的原始需求

**效果更好**的需求描述包含：
- ✅ 业务背景和目标
- ✅ 主要用户角色
- ✅ 核心功能列表
- ✅ 技术约束（如果有）
- ✅ 时间和预算约束（如果有）

**示例**:
```
【业务背景】
我们是一家连锁餐饮企业，目前有50家门店，计划未来2年扩展到200家。
现有的点餐系统老旧，无法支撑快速扩张。

【核心目标】
- 提升点餐效率30%
- 降低错单率至1%以下
- 支持会员营销和数据分析

【主要用户】
- 顾客：扫码点餐、会员管理
- 服务员：订单确认、加菜服务
- 店长：查看报表、库存管理
- 总部运营：多店数据分析、促销配置

【核心功能】
1. 扫码点餐（支持微信/支付宝）
2. 会员系统（积分、优惠券）
3. 订单管理（厨房打印、配菜）
4. 库存管理（实时库存、预警）
5. 数据分析（销售、库存、会员）

【技术约束】
- 必须支持弱网环境（某些门店网络不稳定）
- 需要对接现有的ERP系统
- 部署在阿里云

【时间预算】
- 希望3个月内完成MVP上线
- 预算100万
```

---

### 技巧2: 澄清问题时提供详细答案

Skill会在步骤1生成澄清问题清单，您可以：

**方式A**: 现场回答（推荐）
```
🤔 P0问题澄清

Q1.1: 智能问答的准确率要求？
A: 选择B（标准级，准确率≥90%）

Q1.2: 系统部署方式？
A: 选择A（云端部署，阿里云）

...
```

**方式B**: 选择"基于假设继续"
```
选择C（基于假设继续）
```

Skill会基于行业最佳实践做合理假设，并标注所有假设。

---

### 技巧3: 利用学习记忆功能

**第一次使用**:
正常完成一次分析后，Skill会自动记录您的偏好。

**后续使用**:
Skill会自动应用您的偏好，例如：
```
💡 根据您的偏好设置：
- 使用"按角色拆解"策略
- 目标故事粒度为"适中"（3-5天工作量）
- 优化决策采用"自动模式"
- Must Have占比控制在≤60%

如需调整，请告知。
```

如果您有不同偏好，可以说：
```
这次使用按功能拆解，不使用偏好
```

---

### 技巧4: 分阶段使用

对于大型Epic，建议分阶段分析：

**第一阶段**: 只分析MVP（Must Have）
```
请只分析Must Have功能，Should Have和Could Have先不考虑。
```

**第二阶段**: 完成MVP后，分析Should Have
```
基于上次的分析，现在补充Should Have功能。
```

**第三阶段**: 规划长期优化（Could Have）
```
规划第三期优化功能（Could Have）。
```

---

## 🔧 故障排除

### 问题1: 续传码无效

**症状**: 提示"续传码过期或无效"

**解决方案**:
- 续传码有效期≤7天
- 如果超期，重新执行需求分析
- 或提供原始需求和上次的产出文档（用户故事列表等），让Skill从特定步骤继续

---

### 问题2: INVEST评估分数过低

**症状**: 大量用户故事评分<70

**原因**:
- 用户故事质量不佳
- 需求不够清晰
- 粒度控制不当

**解决方案**:
- 选择"全量优化"（选项A）
- 或返回步骤1，补充更多需求细节
- 或在步骤4手动调整用户故事

---

### 问题3: 生成的故事数量过多/过少

**症状**: Epic生成了50+个故事，或只有5个故事

**原因**:
- 需求层次判断可能有误
- 或需求范围没有明确边界

**解决方案**:
- 如果故事过多（>30个），可能是多个Epic混在一起，建议拆分
- 如果故事过少（<15个），可能是拆分粒度过粗，要求更细化
- 或手动调整需求范围

**操作**:
```
这次生成的故事太多了，请只关注核心功能（智能问答和工单管理），
其他功能（数据分析）下次再分析。
```

---

## 📋 输出文档清单

完整执行一次Epic级分析后，您将获得：

### 1. 需求澄清报告
- 需求层次分析（Epic/Feature/Story）
- 6大维度澄清问题清单（25+个问题）
- P0/P1/P2分级
- 风险预警（5+个风险）

### 2. Epic分析报告（仅Epic级别）
- Epic概述（业务价值、目标、成功标准）
- 用户角色分析（核心/重要/次要角色）
- 拆解策略（拆解维度、框架、预估）
- 依赖与风险分析

### 3. 用户故事列表
- 用户故事总览表
- 详细故事列表（15-30个）
- 每个故事包含：
  - 标准格式：作为...我希望...以便...
  - 功能要点
  - 业务规则
  - 粒度评估（S/M/L）

### 4. INVEST评估报告（仅Epic/Feature级别）
- INVEST评估总览表（六维度评分）
- 问题故事详细分析（改进建议）
- MoSCoW优先级分类
- 迭代规划建议

### 5. 验收标准文档
- 验收标准总览
- 详细验收标准（按故事分组）
  - Given-When-Then场景
  - 功能/非功能验收点
  - 测试用例设计
  - 验收流程

---

## 🎓 最佳实践

### 实践1: 需求评审会前准备

**建议流程**:
1. 用Skill生成需求澄清问题清单
2. 将问题清单发给客户，请其提前准备答案
3. 需求评审会上，基于答案完成后续分析
4. 会后发送完整分析报告

**优势**:
- 提高会议效率
- 减少反复沟通
- 输出标准化文档

---

### 实践2: 迭代规划会输入

**使用步骤**:
1. 将INVEST评估报告和用户故事列表发给开发团队
2. 团队基于MoSCoW优先级和依赖关系进行估算
3. 确定Sprint计划
4. 将验收标准分配给测试团队

---

### 实践3: 团队知识沉淀

**建议**:
1. 第一次使用后，导出偏好配置
2. 分享给团队成员，统一分析标准
3. 定期（每月）回顾优化偏好配置
4. 将优秀的用户故事和验收标准作为模板

---

## 📞 技术支持

### 反馈与改进

如果您在使用过程中遇到问题或有改进建议：

1. **记录问题上下文**:
   - 提供原始需求
   - 提供Skill的输出
   - 说明期望结果

2. **描述改进建议**:
   - 哪里不符合预期
   - 建议如何改进
   - 优先级（P0/P1/P2）

3. **联系方式**:
   - 在对话中说："报告问题：[问题描述]"
   - 或提供问题反馈

---

## 📚 延伸阅读

### 推荐资源

- **用户故事编写**: 《用户故事与敏捷方法》- Mike Cohn
- **需求分析**: 《探索需求》- Donald C. Gause
- **敏捷实践**: 《Scrum精髓》- Kenneth S. Rubin
- **验收测试**: 《ATDD by Example》- Markus Gärtner

### 相关Skill

如果您还需要其他敏捷开发相关的Skill：
- **测试用例生成器**: 基于用户故事生成测试用例
- **技术方案设计助手**: 基于需求生成技术方案
- **迭代规划助手**: 基于用户故事进行Sprint规划

---

## 🎉 开始使用

现在，您可以直接在对话中说：

```
请分析以下需求：[粘贴您的需求]
```

或

```
分析需求：[粘贴您的需求]
```

Skill会自动启动分析流程！

---

**祝您使用愉快！** 🚀

如有任何问题，随时在对话中询问我。

# GCT Reporter - Sprint发布计划

> **项目**: 程序员报表生成工具MVP  
> **团队**: 2人全栈开发团队  
> **周期**: 4周（3个Sprint + 1周测试）  
> **更新**: 2026-01-15

---

## 🎯 项目目标

**MVP核心功能**：设计者能够创建SQL报表，普通用户能够查询和导出Excel

**技术栈**：Java 17 + SpringBoot 3.1 + Vue 3 + Element Plus + SQLite(开发)/Oracle(生产)

---

## 📅 Sprint概览

| Sprint | 周期 | 目标 | 工作量 | 状态 |
|--------|------|------|--------|------|
| Sprint 1 | 第1-2周 | 基础设施 + 报表设计 | 22人日 | 🟡 待开始 |
| Sprint 2 | 第3周 | 报表预览 + 权限 | 9人日 | ⚪ 待开始 |
| Sprint 3 | 第4周 | 用户查询 + 导出 | 14.5人日 | ⚪ 待开始 |
| 集成测试 | 第5周 | 完整测试 + Bug修复 | 5人日 | ⚪ 待开始 |

**总计**: 50.5人日 + 5人日测试 = **55.5人日**

---

## 🚀 Sprint 1: 基础设施 + 报表设计（第1-2周）

### 目标
搭建项目框架，完成报表设计核心功能

### 包含Story（10个）

#### 基础设施层（4个Story，4人日）
- **US000**: 开发环境搭建（1天）✅ 已完成前端初始化
- **US001**: 用户登录（JWT认证，1天）
- **US002**: Session管理（1天）
- **US003**: 数据库初始化（Flyway，0.5天）

#### 管理端（4个Story，4人日）
- **US005**: 用户管理CRUD（2天）
- **US006**: 用户角色分配（1天）
- **US007**: 用户列表与搜索（0.5天）
- **US008**: 密码修改（0.5天）

#### 设计端核心（7个Story，14人日）
- **US010**: SQL编辑器（CodeMirror集成，2天）
- **US011**: 报表基本信息配置（0.5天）
- **US012**: 参数配置功能（1.5天）
- **US013**: 列配置功能（2天）
- **US014**: 报表创建功能（1天）
- **US015**: 报表编辑功能（0.5天）
- **US016**: 报表删除功能（0.5天）

### 关键交付物
- ✅ 用户能够登录系统（3个角色）
- ✅ 管理员能够管理用户
- ✅ 设计者能够创建报表（SQL编辑器 + 参数配置 + 列配置）
- ✅ 设计者能够编辑/删除报表

### 验收标准
- [ ] 前后端项目正常启动
- [ ] 数据库6张表创建成功
- [ ] admin/designer/viewer 3个测试账号可登录
- [ ] SQL编辑器支持语法高亮
- [ ] 报表创建4步流程完整
- [ ] 单元测试覆盖率 > 80%

### 技术风险
⚠️ **CodeMirror集成**（US010）：vue-codemirror 4.0.6可能有兼容性问题  
**应对**: 预留10%缓冲时间，提前技术预研

---

## 🔍 Sprint 2: 报表预览 + 权限（第3周）

### 目标
完成报表测试执行和权限分配功能

### 包含Story（4个）

- **US017**: 报表预览/测试执行（2.5天）
  - 参数输入对话框（动态生成）
  - SQL安全校验（白名单+黑名单）
  - PreparedStatement参数化执行
  - 结果展示（前100行）
  - 执行时间统计

- **US018**: 为报表分配角色权限（2天）
  - 权限分配对话框
  - 角色复选框（ADMIN/DESIGNER/VIEWER）
  - 权限保存API
  - 权限校验拦截器

- **US033**: SQL安全校验增强（0.5天）
  - SQL注入防护测试
  - 查询超时控制（5秒）

- **US034**: 动态列渲染优化（0.5天）
  - 根据列配置渲染表格
  - 格式化器（日期/数字/货币）

### 关键交付物
- ✅ 设计者能够测试执行SQL（预览结果）
- ✅ 设计者能够为报表分配角色权限
- ✅ SQL安全校验生效（防止DROP/DELETE等危险操作）

### 验收标准
- [ ] SQL测试执行返回前100行数据
- [ ] 危险SQL被拦截（DROP/DELETE/TRUNCATE等）
- [ ] 参数化查询防止SQL注入
- [ ] 权限分配保存成功
- [ ] 权限校验拦截器生效

### 技术风险
⚠️ **SQL执行引擎**（US017）：ResultSetMetaData提取列信息可能失败  
**应对**: 降级方案使用默认列配置

---

## 👥 Sprint 3: 用户查询 + 导出（第4周）

### 目标
完成用户端查询和Excel导出功能

### 包含Story（7个）

#### 用户端查询（6个Story，11人日）
- **US021**: 报表列表展示（1天）
  - 获取授权报表列表
  - 卡片/列表视图切换
  - 搜索和筛选

- **US022**: 报表详情查看（0.5天）
- **US023**: 参数输入表单（1.5天）
- **US024**: 执行查询展示结果（2天）
- **US025**: 结果表格展示（1天）
- **US026**: 分页控制（1天）

#### Excel导出（1个Story，2天）
- **US028**: Excel导出功能
  - 前端触发导出
  - 后端Apache POI生成Excel
  - 下载文件（最多5000行）

#### 权限控制（3个Story，1.5天）
- **US029**: 角色权限矩阵（0.5天）
- **US030**: API权限拦截器（0.5天）
- **US031**: 执行日志记录（0.5天）

### 关键交付物
- ✅ 普通用户能够查看授权报表列表
- ✅ 普通用户能够输入参数并执行查询
- ✅ 查询结果表格展示（支持分页）
- ✅ 用户能够导出Excel文件
- ✅ 权限控制生效（未授权用户无法访问）

### 验收标准
- [ ] 用户只能看到已授权的报表
- [ ] 参数输入表单自动生成
- [ ] 查询结果正确展示
- [ ] 分页功能正常（每页20行）
- [ ] Excel导出成功（1000行 < 5秒）
- [ ] 执行日志正确记录

---

## 🧪 集成测试周（第5周）

### 测试范围
- E2E测试（登录 → 创建报表 → 查询 → 导出）
- 性能测试（1000行查询 < 3秒）
- 安全测试（SQL注入、权限绕过）
- 兼容性测试（Chrome/Edge/Firefox）
- 压力测试（50并发用户）

### Bug修复
- P0 Bug: 立即修复
- P1 Bug: 本周修复
- P2 Bug: 下版本修复

### 交付物
- [ ] 测试报告
- [ ] API文档（Swagger）
- [ ] 用户手册
- [ ] 部署文档
- [ ] 演示视频

---

## 📊 人力分配

### 开发者A（全栈，前端为主）
- Sprint 1: 基础UI框架 + SQL编辑器 + 报表设计前端（12天）
- Sprint 2: 报表预览前端 + 权限分配前端（5天）
- Sprint 3: 用户端查询界面 + Excel导出前端（7天）

### 开发者B（全栈，后端为主）
- Sprint 1: 基础设施 + 用户管理 + 报表API（10天）
- Sprint 2: SQL执行引擎 + 权限控制（4天）
- Sprint 3: 查询API + Excel生成 + 权限拦截器（7天）

---

## 🎯 里程碑

| 日期 | 里程碑 | 关键验收点 |
|------|--------|----------|
| 第1周末 | 环境搭建完成 | 前后端启动成功，数据库初始化 |
| 第2周末 | Sprint 1完成 | 报表设计功能可用 |
| 第3周末 | Sprint 2完成 | 报表测试执行和权限分配可用 |
| 第4周末 | Sprint 3完成 | 用户查询和导出可用 |
| 第5周末 | MVP交付 | 完整演示，文档齐全 |

---

## ⚠️ 风险管理

| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|---------|
| CodeMirror集成失败 | 中 | 高 | 降级使用普通Textarea |
| SQL执行性能差 | 中 | 高 | 查询超时5秒，限制100行 |
| 产能不足 | 高 | 高 | 优先完成Must Have功能 |
| 团队成员请假 | 低 | 高 | 预留15%缓冲时间 |
| Oracle迁移问题 | 低 | 中 | 先在SQLite完成开发 |

---

## 📝 每日站会

**时间**: 每天9:30，15分钟

**内容**:
1. 昨天完成了什么？
2. 今天计划做什么？
3. 遇到什么阻碍？

**跟踪工具**: GitHub Projects / Jira

---

## ✅ DoD（Definition of Done）

每个Story完成标准：
- [ ] 代码提交到Git
- [ ] 单元测试通过（覆盖率>80%）
- [ ] 代码审查通过
- [ ] API文档更新
- [ ] 满足所有验收标准
- [ ] 无P0/P1级别Bug

---

## 📞 联系方式

- **Scrum Master**: TBD
- **Product Owner**: TBD
- **开发团队**: 开发者A、开发者B

---

**下一步行动**:
1. ✅ 召开Sprint 1计划会（确认Story范围）
2. ⏳ 开始US000环境搭建（前端已完成，后端待创建）
3. ⏳ 每日站会跟踪进度
4. ⏳ Sprint 1结束时召开评审和回顾会议

---

*更新日期: 2026-01-15*  
*文档版本: v1.0*

# Sprint 1 迭代任务计划

> **Sprint周期**: 第1-2周（10个工作日）  
> **Sprint目标**: 搭建项目框架，完成报表设计核心功能  
> **团队**: 开发者A（前端）+ 开发者B（后端）  
> **工作量**: 22人日

---

## 📊 Sprint 1 Story清单

| Story ID | 故事标题 | 优先级 | 工作量 | 负责人 | 状态 |
|----------|---------|--------|--------|--------|------|
| US000 | 开发环境搭建 | P0 | 1天 | A+B | 🟡 进行中 |
| US001 | 用户登录 | P0 | 1天 | B | ⚪ 待开始 |
| US002 | 用户登出 | P0 | 0.5天 | B | ⚪ 待开始 |
| US003 | Session管理 | P0 | 1天 | B | ⚪ 待开始 |
| US004 | 数据库初始化 | P0 | 0.5天 | B | ✅ 已完成 |
| US005 | 用户管理CRUD | P0 | 2天 | A+B | ⚪ 待开始 |
| US006 | 用户角色分配 | P1 | 1天 | A+B | ⚪ 待开始 |
| US007 | 用户列表与搜索 | P1 | 0.5天 | A | ⚪ 待开始 |
| US008 | 密码修改 | P2 | 0.5天 | A+B | ⚪ 待开始 |
| US010 | SQL编辑器 | P0 | 2天 | A | ⚪ 待开始 |
| US011 | 报表基本信息配置 | P0 | 0.5天 | A+B | ⚪ 待开始 |
| US012 | 参数配置功能 | P0 | 1.5天 | A+B | ⚪ 待开始 |
| US013 | 列配置功能 | P0 | 2天 | A+B | ⚪ 待开始 |
| US014 | 报表创建功能 | P0 | 1天 | A+B | ⚪ 待开始 |
| US015 | 报表编辑功能 | P1 | 0.5天 | A+B | ⚪ 待开始 |
| US016 | 报表删除功能 | P1 | 0.5天 | A+B | ⚪ 待开始 |

---

## 📋 US000: 开发环境搭建

### 故事描述
**作为** 开发团队  
**我想要** 搭建完整的前后端开发环境  
**以便** 开始功能开发

### 故事验收标准
- [ ] 前端Vue项目可以正常启动（http://localhost:5173）
- [ ] 后端SpringBoot项目可以正常启动（http://localhost:8080）
- [ ] 数据库SQLite文件自动创建
- [ ] 前端可以通过代理访问后端API
- [ ] Git仓库初始化完成
- [ ] 项目文档结构创建完成

### 详细任务拆解

#### ✅ T000-1: 前端项目初始化（开发者A，0.5h）
**描述**: 使用Vite创建Vue 3项目
**验收标准**:
- [ ] 使用`npm create vite@latest`创建项目成功
- [ ] package.json包含正确的项目名称
- [ ] 项目可以使用`npm install`安装依赖
- [ ] .gitignore文件包含node_modules、dist

#### ⏳ T000-2: 前端核心依赖安装（开发者A，0.5h）
**描述**: 安装Element Plus、CodeMirror、Axios等
**验收标准**:
- [ ] Element Plus 2.3.x安装成功
- [ ] vue-codemirror + codemirror安装成功
- [ ] axios、vue-router、pinia安装成功
- [ ] package.json的dependencies完整

#### ⏳ T000-3: 前端目录结构创建（开发者A，0.5h）
**描述**: 创建标准Vue项目目录
**验收标准**:
- [ ] src/api目录创建
- [ ] src/components目录创建
- [ ] src/router目录创建（包含index.js）
- [ ] src/stores目录创建（包含index.js）
- [ ] src/utils目录创建
- [ ] src/views目录创建

#### ⏳ T000-4: Vite配置（开发者A，0.5h）
**描述**: 配置开发服务器和API代理
**验收标准**:
- [ ] vite.config.js配置路径别名@
- [ ] 开发服务器端口配置为5173
- [ ] API代理配置（/api → http://localhost:8080）
- [ ] 项目可以使用`npm run dev`启动

#### ⏳ T000-5: 后端项目初始化（开发者B，0.5h）
**描述**: 使用Spring Initializr创建项目
**验收标准**:
- [ ] SpringBoot 3.1.x项目创建成功
- [ ] Group: com.gct, Artifact: report-generator
- [ ] Java版本17
- [ ] pom.xml格式正确
- [ ] `mvn clean compile`编译成功

#### ⏳ T000-6: 后端核心依赖配置（开发者B，0.5h）
**描述**: 添加Spring Web、JPA、Lombok等依赖
**验收标准**:
- [ ] spring-boot-starter-web依赖添加
- [ ] spring-boot-starter-data-jpa依赖添加
- [ ] sqlite-jdbc依赖添加
- [ ] lombok依赖添加
- [ ] flyway-core依赖添加
- [ ] poi和poi-ooxml依赖添加

#### ⏳ T000-7: 后端目录结构创建（开发者B，0.5h）
**描述**: 创建SpringBoot分层目录
**验收标准**:
- [ ] com.gct.reportgenerator.controller包创建
- [ ] com.gct.reportgenerator.service包创建
- [ ] com.gct.reportgenerator.repository包创建
- [ ] com.gct.reportgenerator.entity包创建
- [ ] com.gct.reportgenerator.dto包创建
- [ ] com.gct.reportgenerator.config包创建

#### ⏳ T000-8: application.yml配置（开发者B，0.5h）
**描述**: 配置数据源、JPA、Flyway
**验收标准**:
- [ ] SQLite数据源配置完成
- [ ] JPA配置（ddl-auto: validate）
- [ ] Flyway配置（enabled: true）
- [ ] 服务端口8080
- [ ] 时区配置Asia/Shanghai

#### ⏳ T000-9: 环境启动验证测试（开发者A+B，0.5h）
**描述**: 验证前后端项目启动
**验收标准**:
- [ ] 前端`npm run dev`启动成功
- [ ] 后端`mvn spring-boot:run`启动成功
- [ ] 访问http://localhost:5173显示Vue页面
- [ ] 访问http://localhost:8080返回响应
- [ ] 控制台无错误日志

---

## 📋 US001: 用户登录

### 故事描述
**作为** 系统用户  
**我想要** 使用用户名和密码登录系统  
**以便** 访问系统功能

### 故事验收标准
- [ ] 登录页面包含用户名和密码输入框
- [ ] 点击登录按钮调用后端API
- [ ] 登录成功跳转到首页
- [ ] 登录失败显示错误提示
- [ ] Session保存用户信息
- [ ] 密码使用BCrypt加密

### 详细任务拆解

#### T001-1: 登录页面UI（开发者A，1h）
**描述**: 创建登录页面
**验收标准**:
- [ ] 登录页面布局居中
- [ ] 用户名输入框（必填）
- [ ] 密码输入框（必填，隐藏字符）
- [ ] 登录按钮
- [ ] 表单验证生效

#### T001-2: 登录API调用（开发者A，1h）
**描述**: 前端调用登录接口
**验收标准**:
- [ ] 使用axios发起POST请求
- [ ] 请求路径/api/v1/auth/login
- [ ] 请求体包含username和password
- [ ] 响应成功保存token到localStorage
- [ ] 响应失败显示错误信息

#### T001-3: User实体类（开发者B，0.5h）
**描述**: 创建用户实体
**验收标准**:
- [ ] User实体包含id、username、password、role、enabled字段
- [ ] 使用@Entity注解
- [ ] 使用Lombok简化代码
- [ ] password字段使用BCrypt存储

#### T001-4: UserRepository（开发者B，0.5h）
**描述**: 创建用户Repository
**验收标准**:
- [ ] 继承JpaRepository<User, Long>
- [ ] 添加findByUsername方法
- [ ] 添加findByUsernameAndEnabled方法

#### T001-5: 登录接口（开发者B，2h）
**描述**: 实现POST /api/v1/auth/login接口
**验收标准**:
- [ ] 接收LoginRequest（username、password）
- [ ] 查询用户并验证密码
- [ ] 密码验证使用BCryptPasswordEncoder
- [ ] 生成JWT token
- [ ] 返回token和用户信息
- [ ] 异常情况返回401错误

#### T001-6: 登录功能测试（开发者A+B，1h）
**描述**: 测试登录功能
**验收标准**:
- [ ] 正确用户名密码登录成功
- [ ] 错误密码登录失败
- [ ] 不存在的用户登录失败
- [ ] token正确保存
- [ ] 单元测试覆盖率>80%

---

## 📋 US002: 用户登出

### 故事描述
**作为** 系统用户  
**我想要** 安全地退出系统  
**以便** 保护我的账号信息

### 故事验收标准
- [ ] 提供"退出登录"按钮（位于页面右上角）
- [ ] 点击后清除Session
- [ ] 跳转到登录页面
- [ ] 退出后Session立即失效

### 详细任务拆解

#### T002-1: 退出登录按钮（开发者A，0.5h）
**描述**: 在前端添加退出登录按钮
**验收标准**:
- [ ] 退出按钮位于页面右上角
- [ ] 按钮样式符合设计规范
- [ ] 点击按钮触发退出逻辑

#### T002-2: 退出登录API调用（开发者A，0.5h）
**描述**: 调用后端退出接口
**验收标准**:
- [ ] 调用POST /api/v1/auth/logout接口
- [ ] 清除localStorage的token
- [ ] 跳转到登录页
- [ ] 显示退出成功提示

#### T002-3: 后端退出接口（开发者B，0.5h）
**描述**: 实现POST /api/v1/auth/logout接口
**验收标准**:
- [ ] 清除Session
- [ ] 返回200成功
- [ ] 记录退出日志

#### T002-4: 退出登录测试（开发者A+B，1h）
**描述**: 测试退出登录功能
**验收标准**:
- [ ] 退出后无法访问受保护页面
- [ ] 退出后重新登录正常
- [ ] Session清除验证通过

---

## 📋 US003: Session管理

### 故事描述
**作为** 系统  
**我想要** 管理用户的登录状态  
**以便** 识别用户身份和权限

### 故事验收标准
- [ ] 登录后Session保存用户信息
- [ ] Session超时30分钟
- [ ] 退出登录清除Session
- [ ] 未登录用户访问受保护资源返回401
- [ ] Session包含userId、username、role

### 详细任务拆解

#### T003-1: Session配置（开发者B，0.5h）
**描述**: 配置Session超时和Cookie
**验收标准**:
- [ ] application.yml配置session.timeout=30m
- [ ] cookie.http-only=true
- [ ] cookie.secure=true（生产环境）
- [ ] cookie.same-site=strict

#### T003-2: SessionService（开发者B，2h）
**描述**: 创建Session管理服务
**验收标准**:
- [ ] createSession方法保存用户信息
- [ ] destroySession方法清除Session
- [ ] getCurrentUserId方法获取当前用户
- [ ] getCurrentUserRole方法获取用户角色
- [ ] Session不存在抛出UnauthorizedException

#### T003-3: 登录拦截器（开发者B，2h）
**描述**: 实现登录拦截器
**验收标准**:
- [ ] 实现HandlerInterceptor接口
- [ ] preHandle检查Session
- [ ] 未登录返回401
- [ ] 排除登录接口
- [ ] 拦截器注册到Spring



---

## 📋 US003: 数据库初始化

### 故事描述
**作为** 系统  
**我想要** 自动初始化数据库表结构和测试数据  
**以便** 开发人员快速开始开发

### 故事验收标准
- [ ] Flyway自动执行迁移脚本
- [ ] 6张表创建成功
- [ ] 3个测试账号创建成功
- [ ] 表包含索引和外键约束
- [ ] flyway_schema_history表记录迁移历史
4
### 详细任务拆解

#### T003-1: V1__init_schema.sql（开发者B，2h）
**描述**: 创建表结构脚本
**验收标准**:
- [ ] users表（id、username、password、role、enabled）
- [ ] reports表（id、name、description、sql_content、creator_id）
- [ ] report_params表（id、report_id、param_name、param_type、required）
- [ ] report_columns表（id、report_id、field_name、display_name、format_type）
- [ ] report_permissions表（id、report_id、role）
- [ ] execution_logs表（id、user_id、report_id、execute_time、success）
- [ ] 所有表包含created_at、updated_at字段
- [ ] 索引和外键约束创建

#### T003-2: V2__init_data.sql（开发者B，1h）
**描述**: 4建初始数据脚本
**验收标准**:
- [ ] admin账号（密码BCrypt加密）
- [ ] designer账号
- [ ] viewer账号
- [ ] 密码都是对应的username123

#### T003-3: 数据库初始化验证（开发者B，0.5h）
**描述**: 验证Flyway迁移成功
**验收标准**:
- [ ] SQLite数据库文件创建
- [ ] 6张表全部存在
- [ ] fl4way_schema_history包含2条记录
- [ ] users表包含3条测试账号
- [ ] 可以使用admin/admin123登录

---

## 📋 US005: 用户管理CRUD

### 故事描述4
**作为** 管理员  
**我想要** 创建、查看、编辑、删除用户  
**以便** 管理系统用户

### 故事验收标准
- [ ] 用户列表展示所有用户
- [ ] 可以创建新用户
- [ ] 可以编辑用户信息
- [ ] 可以删除用户
- [ ] 可以启用/禁用用户
- [ ] 密码加密存储

### 详细任务拆解

#### T005-1: 用户列表页面（开发者A，2h）
**描述**: 创建用户管理页面
**验收标准**:
- [ ] 表格展示用户列表
- [ ] 表格列：用户名、角色、状态、操作
- [ ] 新建用户按钮
- [ ] 编辑按钮
- [ ] 删除按钮
- [ ] 启用/禁用开关

#### T005-2: 用户创建对话框（开发者A，2h）
**描述**: 创建用户对话框
**验收标准**:
- [ ] 用户名输入框（必填）
- [ ] 密码输入框（必填）
- [ ] 角色下拉框（ADMIN/DESIGNER/VIEWER）
- [ ] 表单验证生效
- [ ] 保存按钮调用后端API

#### T005-3: 用户编辑对话框（开发者A，1.5h）
**描述**: 编辑用户对话框
**验收标准**:
- [ ] 加载用户信息预填充
- [ ] 用户名不可编辑
- [ ] 密码可选修改
- [ ] 角色可修改
- [ ] 保存按钮调用后端API

#### T005-4: UserService（开发者B，2h）
**描述**: 创建用户服务层
**验收标准**:
- [ ] createUser方法（密码加密）
- [ ] updateUser方法
- [ ] deleteUser方法
- [ ] getUserById方法
- [ ] getAllUsers方法
- [ ] 使用BCryptPasswordEncoder加密密码

#### T005-5: UserController（开发者B，2h）
**描述**: 创建用户管理API
**验收标准**:
- [ ] GET /api/v1/users（获取用户列表）
- [ ] GET /api/v1/users/{id}（获取用户详情）
- [ ] POST /api/v1/users（创建用户）
- [ ] PUT /api/v1/users/{id}（更新用户）
- [ ] DELETE /api/v1/users/{id}（删除用户）
- [ ] 所有接口返回统一格式

#### T005-6: 用户管理测试（开发者A+B，2h）
**描述**: 测试用户CRUD功能
**验收标准**:
- [ ] 创建用户测试通过
- [ ] 编辑用户测试通过
- [ ] 删除用户测试通过
- [ ] 单元测试覆盖率>80%
- [ ] E2E测试通过

---

## 📋 US010: SQL编辑器

### 故事描述
**作为** 报表设计者  
**我想要** 使用SQL编辑器编写查询语句  
**以便** 创建报表

### 故事验收标准
- [ ] SQL编辑器支持语法高亮
- [ ] 支持Ctrl+S保存草稿
- [ ] 支持Ctrl+Enter执行SQL
- [ ] 草稿自动保存（30秒）
- [ ] 页面刷新后草稿自动加载
- [ ] 编辑器显示行号

### 详细任务拆解

#### T010-1: CodeMirror集成（开发者A，2h）
**描述**: 集成vue-codemirror组件
**验收标准**:
- [ ] 安装vue-codemirror 4.0.6
- [ ] 安装codemirror 5.65.x
- [ ] 编辑器组件创建
- [ ] 编辑器在页面中显示
- [ ] 可以输入和编辑文本

#### T010-2: SQL语法高亮配置（开发者A，1h）
**描述**: 配置SQL语法高亮
**验收标准**:
- [ ] 加载text/x-mysql模式
- [ ] SELECT、FROM、WHERE等关键字高亮
- [ ] 字符串和数字有颜色区分
- [ ] 注释正确高亮
- [ ] 主题样式配置

#### T010-3: 快捷键绑定（开发者A，1h）
**描述**: 实现快捷键功能
**验收标准**:
- [ ] Ctrl+S触发保存草稿
- [ ] Ctrl+Enter触发测试执行
- [ ] 快捷键无延迟
- [ ] 快捷键提示显示在界面

#### T010-4: 草稿自动保存（开发者A，1.5h）
**描述**: 实现草稿自动保存
**验收标准**:
- [ ] 30秒定时器工作正常
- [ ] 草稿保存到localStorage
- [ ] 页面刷新后自动加载草稿
- [ ] 手动保存按钮立即保存
- [ ] 保存成功Toast提示

#### T010-5: SQL编辑器测试（开发者A，1.5h）
**描述**: 测试编辑器功能
**验收标准**:
- [ ] 编辑器渲染测试通过
- [ ] 语法高亮测试通过
- [ ] 快捷键响应测试通过
- [ ] 自动保存测试通过
- [ ] 测试覆盖率≥80%

---

## 📋 US011: 报表基本信息配置

### 故事描述
**作为** 报表设计者  
**我想要** 配置报表的名称和描述  
**以便** 标识报表用途

### 故事验收标准
- [ ] 报表名称输入框（必填，最多50字符）
- [ ] 报表描述多行文本框
- [ ] 名称唯一性校验
- [ ] 字符计数器显示
- [ ] 表单验证生效

### 详细任务拆解

#### T011-1: 基本信息表单（开发者A，1h）
**描述**: 创建报表基本信息表单
**验收标准**:
- [ ] 名称输入框（限制50字符）
- [ ] 描述Textarea
- [ ] 字符计数器显示
- [ ] 表单样式符合设计
- [ ] 响应式布局

#### T011-2: 表单校验（开发者A，1h）
**描述**: 实现表单校验
**验收标准**:
- [ ] 名称为空显示错误
- [ ] 名称重复调用后端校验
- [ ] 校验错误不能提交
- [ ] 错误提示清晰
- [ ] 校验通过可提交

#### T011-3: 名称唯一性校验API（开发者B，1h）
**描述**: 实现GET /api/v1/reports/check-name接口
**验收标准**:
- [ ] 接口路径正确
- [ ] 查询数据库判断名称是否存在
- [ ] 返回JSON: {exists: true/false}
- [ ] 响应时间<100ms
- [ ] 大小写敏感

#### T011-4: 基本信息测试（开发者A，0.5h）
**描述**: 测试基本信息配置
**验收标准**:
- [ ] 必填校验测试通过
- [ ] 唯一性校验测试通过
- [ ] 错误提示测试通过
- [ ] API调用测试通过

---

## 📋 US012: 参数配置功能

### 故事描述
**作为** 报表设计者  
**我想要** 配置报表查询参数  
**以便** 用户可以输入参数执行查询

### 故事验收标准
- [ ] 参数配置表格显示
- [ ] 可以添加参数
- [ ] 可以删除参数
- [ ] 可以调整参数顺序
- [ ] 参数类型可选择（STRING/NUMBER/DATE/DATETIME）
- [ ] 从SQL中自动提取参数

### 详细任务拆解

#### T012-1: 参数配置表格UI（开发者A，2h）
**描述**: 创建参数配置表格
**验收标准**:
- [ ] 表格包含参数名、类型、默认值、必填、说明列
- [ ] 表格支持内联编辑
- [ ] 添加参数按钮
- [ ] 表格样式符合设计
- [ ] 空状态提示

#### T012-2: 参数类型切换（开发者A，1h）
**描述**: 实现参数类型选择
**验收标准**:
- [ ] 下拉框包含4种类型
- [ ] 类型切换时默认值输入框变化
- [ ] STRING显示文本框
- [ ] NUMBER显示数字框
- [ ] DATE/DATETIME显示日期选择器

#### T012-3: 参数增删改排序（开发者A，1.5h）
**描述**: 实现参数操作
**验收标准**:
- [ ] 添加按钮新增空行
- [ ] 删除按钮删除行（带确认）
- [ ] 上移按钮上移一位
- [ ] 下移按钮下移一位
- [ ] sortOrder自动更新

#### T012-4: SQL占位符提取（开发者A，1.5h）
**描述**: 从SQL提取:paramName
**验收标准**:
- [ ] 正则表达式提取:paramName
- [ ] 提取的参数显示在列表
- [ ] 校验SQL参数与配置一致
- [ ] 不匹配显示警告
- [ ] 自动添加缺失参数

#### T012-5: 参数配置保存API（开发者B，1.5h）
**描述**: 实现POST /api/v1/reports/{id}/params接口
**验收标准**:
- [ ] 接收参数配置数组
- [ ] 批量保存到report_params表
- [ ] 更新报表updated_at
- [ ] 返回保存成功的参数列表
- [ ] 事务处理

#### T012-6: SQL参数提取工具类（开发者B，1.5h）
**描述**: Java工具类提取SQL参数
**验收标准**:
- [ ] 正则表达式提取:paramName
- [ ] 返回参数名列表（去重）
- [ ] 处理SQL注释
- [ ] 单元测试覆盖率≥90%
- [ ] 工具类可复用

#### T012-7: 参数配置测试（开发者A，1.5h）
**描述**: 测试参数配置功能
**验收标准**:
- [ ] 参数添加测试通过
- [ ] 参数删除测试通过
- [ ] 参数排序测试通过
- [ ] 参数类型切换测试通过
- [ ] SQL参数匹配测试通过

---

## 📋 US013: 列配置功能

### 故事描述
**作为** 报表设计者  
**我想要** 配置报表显示的列  
**以便** 控制列的显示、格式和顺序

### 故事验收标准
- [ ] 列配置表格显示
- [ ] 可以设置列的显示名称
- [ ] 可以设置列宽
- [ ] 可以设置格式化类型（日期/数字/货币）
- [ ] 可以显示/隐藏列
- [ ] 可以调整列顺序
- [ ] 可以从SQL结果自动提取列

### 详细任务拆解

#### T013-1: 列配置表格UI（开发者A，2h）
**描述**: 创建列配置表格
**验收标准**:
- [ ] 表格包含字段名、显示名称、列宽、格式化类型、显示列
- [ ] 表格支持内联编辑
- [ ] Switch开关控制显示/隐藏
- [ ] 表格样式符合设计
- [ ] 空状态提示

#### T013-2: 列属性配置（开发者A，1.5h）
**描述**: 实现列属性配置
**验收标准**:
- [ ] 显示名称输入框可编辑
- [ ] 列宽输入框限制50-500px
- [ ] 格式化类型下拉框（DEFAULT/DATE/NUMBER/CURRENCY）
- [ ] 配置变更实时保存
- [ ] 输入校验生效

#### T013-3: 列显示/隐藏控制（开发者A，1h）
**描述**: 实现列显示控制
**验收标准**:
- [ ] Switch开关切换正常
- [ ] 隐藏的列不显示
- [ ] 全部显示按钮
- [ ] 全部隐藏按钮
- [ ] 至少保留一列可见

#### T013-4: 列排序功能（开发者A，1h）
**描述**: 实现列排序
**验收标准**:
- [ ] 上移按钮上移一位
- [ ] 下移按钮下移一位
- [ ] 第一列上移禁用
- [ ] 最后一列下移禁用
- [ ] sortOrder自动更新

#### T013-5: ResultSetMetaData列提取（开发者B，3h）
**描述**: 从ResultSet提取列信息
**验收标准**:
- [ ] 执行SQL查询获取ResultSet
- [ ] 使用ResultSetMetaData提取列信息
- [ ] 提取列名（columnName）
- [ ] 提取列类型（columnType）
- [ ] 映射JDBC类型到格式化类型

#### T013-6: 自动提取列API（开发者B，1.5h）
**描述**: 实现POST /api/v1/reports/extract-columns接口
**验收标准**:
- [ ] 接收SQL和参数
- [ ] 调用列提取工具
- [ ] 返回列信息数组
- [ ] 异常情况返回错误
- [ ] 超时控制5秒

#### T013-7: 列配置保存API（开发者B，1.5h）
**描述**: 实现POST /api/v1/reports/{id}/columns接口
**验收标准**:
- [ ] 接收列配置数组
- [ ] 批量保存到report_columns表
- [ ] 更新报表updated_at
- [ ] 返回保存成功的列配置
- [ ] 事务处理

#### T013-8: 列配置测试（开发者A，1.5h）
**描述**: 测试列配置功能
**验收标准**:
- [ ] 自动提取列测试通过
- [ ] 列属性配置测试通过
- [ ] 列显示/隐藏测试通过
- [ ] 列排序测试通过
- [ ] 列配置保存测试通过

---

## 📋 US014: 报表创建功能

### 故事描述
**作为** 报表设计者  
**我想要** 创建完整的报表配置  
**以便** 保存报表供用户使用

### 故事验收标准
- [ ] 4步创建流程完整
- [ ] 步骤间数据传递正确
- [ ] 保存成功跳转到列表
- [ ] 保存失败显示错误
- [ ] 使用事务保证一致性

### 详细任务拆解

#### T014-1: 多步骤表单整合（开发者A，1.5h）
**描述**: 整合Step1-4页面
**验收标准**:
- [ ] 4个步骤页面路由配置
- [ ] 步骤条显示当前步骤
- [ ] 上一步/下一步导航
- [ ] 步骤切换有过渡动画
- [ ] 步骤数据共享

#### T014-2: 表单数据收集与提交（开发者A，1.5h）
**描述**: 收集所有配置数据
**验收标准**:
- [ ] 收集报表基本信息
- [ ] 收集SQL内容
- [ ] 收集参数配置数组
- [ ] 收集列配置数组
- [ ] 组装完整JSON

#### T014-3: 保存成功跳转（开发者A，0.5h）
**描述**: 保存成功处理
**验收标准**:
- [ ] 保存成功显示Toast
- [ ] 1.5秒后跳转到列表
- [ ] 跳转后清除草稿
- [ ] 列表页高亮新建报表
- [ ] 跳转动画平滑

#### T014-4: 报表创建API（开发者B，3h）
**描述**: 实现POST /api/v1/reports接口
**验收标准**:
- [ ] 接收完整报表配置
- [ ] 保存报表基本信息到reports表
- [ ] 调用事务处理保存参数和列
- [ ] 返回报表ID和创建时间
- [ ] 异常情况回滚

#### T014-5: 事务处理（开发者B，1.5h）
**描述**: 实现事务一致性
**验收标准**:
- [ ] 使用@Transactional注解
- [ ] 报表保存失败回滚
- [ ] 参数保存失败回滚
- [ ] 列配置保存失败回滚
- [ ] 事务隔离级别正确

#### T014-6: 报表创建E2E测试（开发者A，1.5h）
**描述**: 端到端测试
**验收标准**:
- [ ] Step1基本信息填写测试通过
- [ ] Step2 SQL编辑测试通过
- [ ] Step3参数配置测试通过
- [ ] Step4列配置测试通过
- [ ] 完整流程保存测试通过

---

## 📋 US015: 报表编辑功能

### 故事描述
**作为** 报表设计者  
**我想要** 编辑已创建的报表  
**以便** 修改报表配置

### 故事验收标准
- [ ] 可以打开已有报表
- [ ] 报表配置自动加载
- [ ] 可以修改所有配置
- [ ] 保存成功更新报表
- [ ] 使用事务保证一致性

### 详细任务拆解

#### T015-1: 报表配置加载（开发者A，1h）
**描述**: 加载报表完整配置
**验收标准**:
- [ ] 调用后端API获取配置
- [ ] 加载报表基本信息
- [ ] 加载SQL内容
- [ ] 加载参数配置数组
- [ ] 加载列配置数组

#### T015-2: 表单预填充（开发者A，1h）
**描述**: 预填充Step1-4表单
**验收标准**:
- [ ] Step1基本信息预填充
- [ ] Step2 SQL编辑器预填充
- [ ] Step3参数表格预填充
- [ ] Step4列配置表格预填充
- [ ] 预填充数据格式正确

#### T015-3: 更新提交（开发者A，0.5h）
**描述**: 提交修改后的配置
**验收标准**:
- [ ] 调用PUT /api/v1/reports/{id}接口
- [ ] 提交更新后的完整配置
- [ ] 更新成功显示Toast
- [ ] 更新成功跳转到列表
- [ ] 更新失败显示错误

#### T015-4: 报表配置查询API（开发者B，1.5h）
**描述**: 实现GET /api/v1/reports/{id}/full接口
**验收标准**:
- [ ] 查询报表基本信息
- [ ] 关联查询参数配置
- [ ] 关联查询列配置
- [ ] 返回完整JSON数据
- [ ] 报表不存在返回404

#### T015-5: 报表更新API（开发者B，1.5h）
**描述**: 实现PUT /api/v1/reports/{id}接口
**验收标准**:
- [ ] 更新报表基本信息
- [ ] 更新参数配置（先删除再插入）
- [ ] 更新列配置（先删除再插入）
- [ ] 使用事务保证一致性
- [ ] 更新updated_at字段

#### T015-6: 报表编辑测试（开发者A，1h）
**描述**: 测试报表编辑功能
**验收标准**:
- [ ] 配置加载测试通过
- [ ] 表单预填充测试通过
- [ ] 配置修改测试通过
- [ ] 配置更新测试通过
- [ ] E2E测试通过

---

## 📋 US016: 报表删除功能

### 故事描述
**作为** 报表设计者  
**我想要** 删除不需要的报表  
**以便** 清理报表列表

### 故事验收标准
- [ ] 删除前显示确认对话框
- [ ] 删除成功移除报表
- [ ] 级联删除参数和列配置
- [ ] 删除成功刷新列表
- [ ] 删除失败显示错误

### 详细任务拆解

#### T016-1: 删除确认对话框（开发者A，0.5h）
**描述**: 创建删除确认对话框
**验收标准**:
- [ ] 对话框显示报表名称
- [ ] 对话框显示警告信息
- [ ] 确认按钮为红色
- [ ] 取消按钮正常工作
- [ ] 对话框关闭动画平滑

#### T016-2: 删除API调用（开发者A，0.5h）
**描述**: 调用DELETE /api/v1/reports/{id}接口
**验收标准**:
- [ ] 确认后调用删除接口
- [ ] 删除成功显示Toast
- [ ] 删除成功刷新列表
- [ ] 删除失败显示错误
- [ ] 加载状态显示

#### T016-3: 报表删除API（开发者B，1.5h）
**描述**: 实现DELETE /api/v1/reports/{id}接口
**验收标准**:
- [ ] 删除报表基本信息
- [ ] 级联删除参数配置
- [ ] 级联删除列配置
- [ ] 级联删除权限配置
- [ ] 使用事务保证一致性

#### T016-4: 报表删除测试（开发者A，1h）
**描述**: 测试报表删除功能
**验收标准**:
- [ ] 删除确认对话框测试通过
- [ ] 删除API调用测试通过
- [ ] 级联删除测试通过
- [ ] 权限校验测试通过
- [ ] E2E测试通过

---

## 📊 Sprint 1 进度跟踪

### 每日站会记录

| 日期 | 完成Story | 进行中Story | 阻碍问题 | 解决方案 |
|------|----------|------------|---------|---------|
| Day 1 |  |  |  |  |
| Day 2 |  |  |  |  |
| Day 3 |  |  |  |  |
| Day 4 |  |  |  |  |
| Day 5 |  |  |  |  |
| Day 6 |  |  |  |  |
| Day 7 |  |  |  |  |
| Day 8 |  |  |  |  |
| Day 9 |  |  |  |  |
| Day 10 |  |  |  |  |

### Sprint燃尽图

```
22人日 │                                ╲
       │                                 ╲
       │                                  ╲
       │                                   ╲
       │                                    ╲
       │                                     ╲
       │                                      ╲
       │                                       ╲
       │                                        ╲
       │                                         ╲
    0  └─────────────────────────────────────────╲
       Day1  Day2  Day3  Day4  Day5  Day6  Day7  Day8  Day9  Day10
```

---

## ✅ Sprint 1 完成标准

### Sprint目标达成
- [ ] 前后端项目正常启动
- [ ] 用户能够登录系统
- [ ] 管理员能够管理用户
- [ ] 设计者能够创建报表

### 质量标准
- [ ] 单元测试覆盖率 > 80%
- [ ] 所有API接口测试通过
- [ ] 代码审查通过
- [ ] 无P0/P1级别Bug

### 文档完成
- [ ] API文档更新
- [ ] README更新
- [ ] 技术文档完成

---

*更新时间: 2026-01-15*  
*负责人: Scrum Master*
